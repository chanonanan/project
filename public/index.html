<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="./asset/font-awesome/css/all.css" rel="stylesheet">
  <link href="./asset/css/style.css" rel="stylesheet">
  <script defer src="./asset/font-awesome/js/all.js"></script>
  <title>Athlete Test</title>
</head>

<body style="overflow: hidden;" id="body">
  <button onclick="rotate(0)">0</button>
  <button onclick="rotate(45)">45</button>
  <button onclick="rotate(90)">90</button>
  <button onclick="rotate(135)">135</button>
  <button onclick="rotate(180)">180</button>
  <button onclick="rotate(225)">225</button>
  <button onclick="rotate(270)">270</button>
  <button onclick="rotate(315)">315</button>
  <div id="rotating" class="full-screen-icon">
    <i class="fas fa-long-arrow-alt-up"></i>
  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  <!-- include socket.io client side script -->
  <script>
    function addZero(x, n) {
      while (x.toString().length < n) {
        x = "0" + x;
      }
      return x;
    }

    function changeColor(success) {
      var body = document.getElementById('body');
      if(success){
        body.style.backgroundColor = '#60ff60';
      }else{
        body.style.backgroundColor = '#fd4d4d';
      }
      window.setTimeout(function () {
        body.style.backgroundColor = '';
      }, 500);
    }

    function rotate(deg) {
      var div = document.getElementById('rotating');
      changeColor(false);
      div.style.webkitTransform = 'rotate(' + deg + 'deg)';
      div.style.mozTransform = 'rotate(' + deg + 'deg)';
      div.style.msTransform = 'rotate(' + deg + 'deg)';
      div.style.oTransform = 'rotate(' + deg + 'deg)';
      div.style.transform = 'rotate(' + deg + 'deg)';
    }

    var socket = io(); //load socket.io-client and connect to the host that serves the page

    window.addEventListener("load", function () { //when page loads
      console.log('init');
      // socket.emit("next", Number(4));
      // socket.emit("delta", Number(4));
    });

    socket.on('direction', function (data) { //get button status from client
      rotate(data*45);
      socket.emit("direction", data);
    });


  </script>

</html>
</body>

</html>